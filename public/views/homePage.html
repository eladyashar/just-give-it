
<!DOCTYPE html>
<html lang="en" ng-app="appModule">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Blur Admin</title>

  <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900italic,900&subset=latin,greek,greek-ext,vietnamese,cyrillic-ext,latin-ext,cyrillic' rel='stylesheet' type='text/css'>

  <link rel="icon" type="image/png" sizes="16x16" href="../img/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="../img/favicon-96x96.png">

  <!-- build:css({.tmp/serve,src}) styles/vendor.css -->
  <!-- bower:css -->
  <link rel="stylesheet" href="../lib/ionicons.css" >
  <link rel="stylesheet" href="../lib/angular-toastr.css" >
  <link rel="stylesheet" href="../lib/animate.css" >
  <link rel="stylesheet" href="../lib/bootstrap.css" >
  <link rel="stylesheet" href="../lib/bootstrap-select.css" >
  <link rel="stylesheet" href="../lib/bootstrap-switch.css" >
  <link rel="stylesheet" href="../lib/bootstrap-tagsinput.css" >
  <link rel="stylesheet" href="../lib/font-awesome.css" >
  <link rel="stylesheet" href="../lib/fullcalendar.css" >
  <link rel="stylesheet" href="../lib/leaflet.css" >
  <link rel="stylesheet" href="../lib/angular-progress-button-styles.min.css" >
  <link rel="stylesheet" href="../lib/chartist.min.css" >
  <link rel="stylesheet" href="../lib/morris.css" >
  <link rel="stylesheet" href="../lib/ion.rangeSlider.css" >
  <link rel="stylesheet" href="../lib/ion.rangeSlider.skinFlat.css" >
  <link rel="stylesheet" href="../lib/textAngular.css" >
  <link rel="stylesheet" href="../lib/xeditable.css" >
  <link rel="stylesheet" href="../lib/style.css" >
  <link rel="stylesheet" href="../lib/select.css" >
  <!-- endbower -->
  <!-- endbuild -->
    
    <link rel="stylesheet" href="../stylesheets/auth.css">

  <!-- build:css({.tmp/serve,src}) styles/app.css -->
  <!-- inject:css -->
  <link rel="stylesheet" href="../stylesheets/main.css">
    <link rel="stylesheet" href="../stylesheets/map.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.js"></script>
    <script type="text/javascript" src="../lib/jquery.js"></script>
    <script type="text/javascript" src="../lib/bootstrap-switch.js"></script>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
   
    <script type="text/javascript" src="../javascripts/app.js"></script>

    <script type="text/javascript" src="../javascripts/dashboard.js"></script>


    <script type='text/javascript' src ="../javascripts/profile.js"></script>
    <script type="text/javascript" src="../javascripts/map.js"></script>
    <link rel="stylesheet" href="../stylesheets/nav.css">
    <link rel="stylesheet" href="../stylesheets/profile.css"> 
      <link rel="stylesheet" href="../stylesheets/dashboard.css"> 
      
    <script>
        function w3_open() {
            document.getElementById("main").style.marginLeft = "10%";
			 document.getElementById("main").style.marginTop = "54px";
	document.getElementById("mySidebar").style.width = "10%";
	document.getElementById("mySidebar").style.display = "block";
	document.getElementById("openNav").style.display = 'none';
        }
        function w3_close() {
            document.getElementById("main").style.marginLeft = "0%";
			document.getElementById("main").style.marginTop = "0px"
  document.getElementById("mySidebar").style.display = "none";
  document.getElementById("openNav").style.display = "inline-block";
        }
    </script>
       
  <!-- endinject -->
  <!-- endbuild -->
</head>
<body ng-controller="mainController">


  <div class="w3-sidebar w3-bar-block w3-card w3-animate-left" style="display:none" id="mySidebar">
  <button class="w3-bar-item w3-button w3-large"
  onclick="w3_close()">Close &times;</button>
      <div class="row w3-button" ng-click="isMapOn=false">
          <div class="col-md-2"> 
            <i class="glyphicon glyphicon-home"></i>
          </div>
          <div class="col-md-10">
              <a href="#!/home" class="w3-bar-item">Home page</a>
          </div>
      </div>
      <div class="row w3-button" ng-click="isMapOn=true">
          <div class="col-md-2"> 
            <i class="glyphicon glyphicon-map-marker"></i>
          </div>
          <div class="col-md-9">
            <a href="#!/map" class="w3-bar-item">Map</a>
          </div>
      </div>
       <div class="row w3-button" ng-click="isMapOn=false">
          <div class="col-md-2"> 
            <i class="glyphicon glyphicon-shopping-cart"></i>
           </div>
           <div class="col-md-10">
               <a href="#!/stores" class="w3-bar-item">Stores</a>
           </div>
      </div>
      <div class="row w3-button" ng-click="isMapOn=false">
          <div class="col-md-2"> 
            <i class="glyphicon glyphicon-user"></i>
          </div>
          <div class="col-md-10">
              <a href="#!/profile" class="w3-bar-item">Profile</a>
          </div>
      </div>
    </div>

<div id="main">

<div class="w3-teal">
  <button id="openNav" class="w3-button w3-teal w3-xlarge" onclick="w3_open()">&#9776;</button>
  <div class="w3-container">
    <h1>Helpool</h1>
  </div>
</div>


<div class="w3-container" style="margin-top: 30px;">
    <div ng-if="isMapOn" ng-controller="mapController">
        <div class="pac-card" id="pac-card">
          <div>
            <div id="title" style="text-align: right">
              חיפוש
            </div>
          </div>
          <div id="pac-container">
            <input id="pac-input" type="text" placeholder="הכניסו כתובת" style="text-align: right">
          </div>
        </div>
        <div id="map"></div>
        <div id="infowindow-content">
          <img src="" width="16" height="16" id="place-icon">
          <span id="place-name"  class="title"></span><br>
          <span id="place-address"></span>
        </div>
      </div>
    <div ng-view></div>
</div>
    </div>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBxtfPL5MHvmmm2lj0CGmTgN4O2bZHjL5k&region=IL&language=iw&libraries=places&callback=initMap"
        async defer></script>
    <script>
      // This example requires the Places library. Include the libraries=places
      // parameter when you first load the API. For example:
      // <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places">
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: 30.397, lng: 30.644},
            zoom: 14
        });
          
        infoWindow = new google.maps.InfoWindow;

        // Try HTML5 geolocation.
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                var pos = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };

//                    infoWindow.setPosition(pos);
//                    infoWindow.setContent('אתה נמצא כאן');
                infoWindow.open(map);
                map.setCenter(pos);
                var marker = new google.maps.Marker({
                  position: pos,
                  animation: google.maps.Animation.DROP,
                  map: map,
                  title: 'את/ה כאן'
                });
            }, function() {
                handleLocationError(true, infoWindow, map.getCenter());
            });
        } else {
            // Browser doesn't support Geolocation
            handleLocationError(false, infoWindow, map.getCenter());
        }
          
        var card = document.getElementById('pac-card');
        var input = document.getElementById('pac-input');

        map.controls[google.maps.ControlPosition.TOP_RIGHT].push(card);

        var autocomplete = new google.maps.places.Autocomplete(input);

        // Bind the map's bounds (viewport) property to the autocomplete object,
        // so that the autocomplete requests use the current map bounds for the
        // bounds option in the request.
        autocomplete.bindTo('bounds', map);

        var infowindow = new google.maps.InfoWindow();
        var infowindowContent = document.getElementById('infowindow-content');
        infowindow.setContent(infowindowContent);
        var marker = new google.maps.Marker({
          map: map,
          anchorPoint: new google.maps.Point(0, -29),
          draggable: true,
          animation: google.maps.Animation.DROP
        });

        autocomplete.addListener('place_changed', function() {
          infowindow.close();
          marker.setVisible(false);
          var place = autocomplete.getPlace();
          if (!place.geometry) {
            // User entered the name of a Place that was not suggested and
            // pressed the Enter key, or the Place Details request failed.
            window.alert("No details available for input: '" + place.name + "'");
            return;
          }

          // If the place has a geometry, then present it on a map.
          if (place.geometry.viewport) {
            map.fitBounds(place.geometry.viewport);
          } else {
            map.setCenter(place.geometry.location);
            map.setZoom(17);  // Why 17? Because it looks good.
          }
          marker.setPosition(place.geometry.location);
          marker.setVisible(true);

          var address = '';
          if (place.address_components) {
            address = [
              (place.address_components[0] && place.address_components[0].short_name || ''),
              (place.address_components[1] && place.address_components[1].short_name || ''),
              (place.address_components[2] && place.address_components[2].short_name || '')
            ].join(' ');
          }

          infowindowContent.children['place-icon'].src = place.icon;
          infowindowContent.children['place-name'].textContent = place.name;
          infowindowContent.children['place-address'].textContent = address;
          infowindow.open(map, marker);
        });

      }
        
    </script>
    </body>
</html>